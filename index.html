<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random YouTube Video</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&family=Ruda:wght@400..900&display=swap');

        * {
            font-family: "Montserrat", sans-serif;
            color: white;
            padding: 10px;
            margin: 0;
            box-sizing: border-box;
            transition: ease 0.3s;
        }

        body {
            background: linear-gradient(45deg, #565656, #666666);
            background-repeat: no-repeat;
            background-attachment: fixed;
            background-size: cover;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            height: 100vh;
            text-align: center;
        }

        h1 {
            margin-bottom: 20px;
            font-size: 2em;
        }

        iframe {
            box-shadow: -0px -0px 15px rgba(0, 0, 0, 0.2);
            margin-bottom: 20px;
        }

        #url {
            display: block;
            color: #fff;
            font-size: 1.1em;
            margin-bottom: 30px;
            text-decoration: none;
            transition: color 0.3s;
        }

        #url:hover {
            color: #ff9800;
        }

        #genURLBtn {
            border: none;
            background: #888888;
            border-radius: 15px;
            padding: 10px 20px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s, transform 0.3s;
        }

        #genURLBtn:hover {
            background: #AAAAAA;
            transform: scale(1.1);
        }
    </style>
    <script>
        const API_KEY = 'AIzaSyBWirjPQcXPjnMhx4lWCJX4QBd01E0wseU'; // Замените на ваш ключ API

        let videoList = []; // Массив для хранения найденных видео
        let videoIndex = 0; // Индекс текущего видео в массиве

        const request = document.getElementById('req')

function generateRequest() {
    // Массив слов с разных языков Европы и Азии, включая добавленные казахские слова
    let word_data = [
        "bonjour", "hello", "hola", "ciao", "hallo", "olá", "merhaba", "안녕하세요", "こんにちは", "Привет", "नमस्ते", "你好", "สวัสดี", "здравствуйте", "שלום",
        "сэлэм", "добрый", "thank", "merci", "gracias", "danke", "arigato", "obrigado", "saluton", "guten", "hola", "hej", "приветствие", "gamarjoba", "hejsan",
        "xin chào", "bonsoir", "ai", "emre", "tashi delek", "namaste", "hola", "mingalaba", "selamat", "vaša", "स्वागत", "добре", "skål", "bonjourno",
        "hola", "privet", "mir", "ama", "yahweh", "cześć", "howdy", "שלום", "こんにちは", "bonjour", "sup", "aloha", "tulivu", "maligayang", "स्वागत", "день",
        "po dobranu", "me", "meow", "مبروك", "endereço", "litt", "great", "hjälp", "здарова", "konnichiwa", "mahalo", "vida", "дежавю", "fjärde", "Голя",
        "yakun", "shukran", "felyk", "svar", "вечер", "иерусалим", "morning", "oscar", "हेलो", "salam", "tashi", "zend", "buenos", "konnichiwa", "tuvok",
        "elma", "tserp", "merhaba", "cheque", "fiesta", "ko", "dinner", "вроде", "как", "lunch", "gate", "vraag", "zdravo", "милый", "lugar", "рассказ", 
        "바나나", "cafe", "дом", "buka", "kise", "raptor", "hello", "hajime", "группа", "degul", "hassan", "hise", "россия", "faiz", "mbap", "se", "jüla",
        "маяк", "break", "ryan", "bravo", "madam", "nikos", "terra", "просто", "student", "luz", "ella", "feliz", "отдых", "аргентинец", "mushahid", "nash", 
        "chiles", "oficina", "res", "заказ", "noor", "movie", "merhaba", "caminos", "theory", "numbers", "vi", "chien", "jose", "neva", "hello", "nature",
        "photo", "serge", "cultura", "berita", "estudios", "stop", "lesson", "fiesta", "muda", "benedik", "fratello", "gracias", "happy", "the", "goodbye", 
        "motivation", "gracias", "gora", "barcelona", "juga", "dance", "valor", "true", "rezo", "led", "science", "piano", "hoge", "universal", "compas",
        "new", "sevia", "espanol", "massege", "cat", "hello", "algebra", "serum", "work", "el", "in", "quiem", "home", "sun", "sur", "selena", "космос",
        "serce", "zhuang", "moby", "agri", "forest", "cats", "te", "tours", "countries", "human", "language", "finish", "with", "without", "quimica", "speed",
        "time", "math", "game", "hand", "pets", "human", "hacker", "hello", "grace", "waves", "labo", "giant", "computer", "past", "baba", "uzb", "studios",
        "genesis", "compassion", "holiday", "bath", "pencil", "world", "piano", "research", "sun", "boss", "kinos", "soccer", "teacher", "star", "приключения",
        "қолдану", "мектебіңіздің", "директорының", "үшін", "директордың", "оқушыларының", "құпиясөздері", "шарттың", "көрсетілген", "техникалық", "ерекшелігінде",
        "поштаға", "жіберілді", "орынбасарларының", "мұғалімдері"
    ];

    // Генерация случайных индексов
    let firstWordIndex = Math.floor(Math.random() * word_data.length);  // Случайный индекс для первого слова
    let secondWordIndex = Math.floor(Math.random() * word_data.length); // Индекс второго слова


    // Возвращаем строку, объединяя два случайных слова
    if(req.value.trim() === "") return word_data[firstWordIndex] + " " + word_data[secondWordIndex];
    else return req.value
}


        function searchVideos(query) {
            pageToken = random(1, 10)
            const url = `https://www.googleapis.com/youtube/v3/search?part=snippet&q=${encodeURIComponent(query)}&key=${API_KEY}&maxResults=10&pageToken=${pageToken}&type=video`;

            return fetch(url)
                .then(response => response.json())
                .then(data => {
                    if (data.items && data.items.length > 0) {
                        videoList = data.items.map(item => {
                            return {
                                id: item.id.videoId,
                                url: `https://www.youtube.com/watch?v=${item.id.videoId}`,
                                title: item.snippet.title
                            };
                        });
                        console.log("Videos found:", videoList);
                    } else {
                        console.log("No videos found.");
                    }
                })
                .catch(error => {
                    console.log("Error:", error);
                });
        }

        // Функция для обновления видео
        function updateVideo() {
            if (videoList.length === 0) {
                alert("No more videos. Please start a new search.");
                return;
            }

            const currentVideo = videoList[random(0, videoList.length)];
            const iframe = document.getElementById('vid');
            const urlP = document.getElementById('url');

            iframe.src = `https://www.youtube.com/embed/${currentVideo.id}`; // Обновление iframe
            urlP.href = currentVideo.url;
            urlP.textContent = currentVideo.url; // Отображение полного URL
        }

        // Функция для начала нового поиска
        function startSearch(query) {
            videoIndex++; 
            if(videoIndex >= videoList.length){videoIndex = 0; videoList.length = 0; searchVideos(query); await new Promise(resolve => setTimeout(resolve, 1000));} 
            updateVideo();
        }
    </script>
</head>
<body>
    <h1>Random YouTube Video!</h1>
    <iframe id="vid" width="560" height="315" src="" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    <a id="url" href="#">Video Link</a>
    <button id="genURLBtn" onclick="startSearch(generateRequest())">Generate new</button> <!-- Здесь можно заменить запрос -->
</body>
</html>
